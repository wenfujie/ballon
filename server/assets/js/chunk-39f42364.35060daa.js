(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39f42364"],{"04d8":function(t,e,a){"use strict";a("ac4d"),a("8a81"),a("ac6a");var s=a("09cb"),n=a("bf3c"),i=window.c_disposeCityData(n["a"]);function o(t,e){return t.map(function(t){var a=!0,s=!1,n=void 0;try{for(var i,o=e[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var r=i.value;if(r.label==t)return e=r.children,r.value}}catch(c){s=!0,n=c}finally{try{a||null==o.return||o.return()}finally{if(s)throw n}}return null})}function r(){Object(s["a"])("kyQyvOBQwLUVrHieFzUcfV1TZt0slzlG").then(function(t){var e=new t.Geocoder,a=new t.Geolocation,s=[],n=[];a.getCurrentPosition(function(t){if(this.getStatus()==BMAP_STATUS_SUCCESS){var a=t.point;e.getLocation(a,function(t){var e=t.addressComponents;s=[e.province,e.city,e.district],n=o(s,i),Storage.set("POSITION",{location:n,locationTxt:s})})}else alert("failed"+this.getStatus())},{enableHighAccuracy:!0})})}e["a"]=r},"471d":function(t,e,a){},7385:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-reserve"},[a("div",{staticClass:"right-div"},[0==Object.keys(this.$route.query).length?a("div",{staticClass:"right-item"},[t._v("\n      "+t._s(t.$t("myReservation.type"))+":\n      "),a("el-select",{attrs:{clearable:"",placeholder:"请选择状态"},on:{change:t.selectState,clear:function(e){t.getVolumeList,t.statusId=""}},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},t._l(t.stateList,function(t,e){return a("el-option",{key:e,attrs:{label:t.txt,value:t.id}})}),1)],1):t._e(),t.pagination.count>0?a("ul",{staticClass:"reserve-list"},t._l(t.volumeList,function(e,s){return a("li",{key:s},[a("p",[t._v(t._s(t.$t("myReservation.reservaCode"))+"："+t._s(e.billCode))]),a("div",{staticClass:"base-infor flex-around"},[a("div",[a("span",[t._v(t._s(t.$t("myReservation.cargousrName"))+" :")]),a("span",[t._v(t._s(e.cargousrName))])]),a("div",[a("span",[t._v(t._s(t.$t("myReservation.cargoMobile"))+" :")]),a("span",[t._v(t._s(e.cargoMobile))])]),a("div",[a("span",[t._v(t._s(t.$t("myReservation.msrWayName"))+" :")]),a("span",[t._v(t._s(e.msrWayName))])])]),a("div",{staticClass:"reserve-infor flex-box"},[a("div",[a("span",[t._v(t._s(t.$t("myReservation.measureTime"))+" :")]),a("span",[t._v(t._s(e.orderTime))])]),a("div",{staticClass:"flex-box"},[a("span",[t._v(t._s(t.$t("myReservation.measureAdress"))+" :")]),a("span",[t._v(t._s(e.stateName)+" "+t._s(e.cityName)+t._s(e.destName)+t._s(e.address))])])]),a("div",{staticClass:"other-infor"},[a("div",[a("span",[t._v(t._s(t.$t("common.measureMemo"))+":")]),a("span",[t._v(t._s(e.measureMemo?e.measureMemo:"-"))])]),a("div",[a("span",[t._v(t._s(t.$t("myReservation.type"))+":")]),a("span",{class:"10051501"==e.statusId||"10051506"==e.statusId?"state-red":"state-black"},[t._v(t._s(e.text))])])]),"D_SALEMSRSTATUS1"==e.statusCode||"D_SALEMSRSTATUS2"==e.statusCode?a("div",{staticClass:"dialog-button"},["D_SALEMSRSTATUS2"!=e.statusCode?a("button",{staticClass:"sure",on:{click:function(a){return t.bookingShow(e)}}},[t._v(t._s(t.$t("myReservation.modifyReservation")))]):t._e(),a("button",{staticClass:"cancel",on:{click:function(a){return t.cancalBooking(e)}}},[t._v(t._s(t.$t("myReservation.cancelReservation")))])]):"D_SALEMSRSTATUS5"==e.statusCode||"D_SALEMSRSTATUS6"==e.statusCode?a("div",{staticClass:"dialog-button"},["D_SALEMSRSTATUS5"==e.statusCode?a("button",{staticClass:"sure",on:{click:function(e){return t.$router.push("/amount-body")}}},[t._v(t._s(t.$t("amountBody.viewData")))]):t._e(),a("button",{staticClass:"cancel",on:{click:function(a){return t.deleteBooking(e)}}},[t._v(t._s(t.$t("common.delete")))])]):t._e()])}),0):a("div",{staticClass:"no-data"},[t._m(0),a("div",{staticClass:"img-row-two"},[t._v(t._s(t.$t("myReservation.noData")))])]),t.pagination.count>5&&0==Object.keys(this.$route.query).length?a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.pagination.currentPage,"page-size":t.pagination.limit,background:"",layout:"prev, pager, next",total:t.pagination.count},on:{"current-change":t.handleCurrentChange}})],1):t._e()]),a("Booking",{ref:"addBooking",attrs:{entrance:1},on:{getVolumeList:t.getVolumeList}})],1)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"img-row-one"},[s("img",{attrs:{src:a("9ab1")}})])}],i=(a("ac6a"),a("456d"),a("04d8")),o=a("22ce"),r=a("010e"),c={components:{Booking:r["a"]},data:function(){return{pagination:{count:0,limit:5,page:1,currentPage:1},stateList:[{value:"D_SALEMSRSTATUS1",label:"未审核",txt:"审核中",id:"10051501"},{value:"D_SALEMSRSTATUS2",label:"已审核",txt:"审核通过待指派量体师",id:"10051502"},{value:"D_SALEMSRSTATUS3",label:"已派遣",txt:"已派遣量体师",id:"10051503"},{value:"D_SALEMSRSTATUS4",label:"预约完成",txt:"预约成功",id:"10051504"},{value:"D_SALEMSRSTATUS5",label:"已完成",txt:"量体完成",id:"10051505"},{value:"D_SALEMSRSTATUS6",label:"已作废",txt:"已取消",id:"10051506"}],statusId:"",usrId:Storage.get("USER_INFO").usrId,companyId:Storage.get("COMPANYID").company_id,ownCompanyId:Storage.get("COMPANYID").company_id,state:"",loading:!1,volumeList:[],booingInfor:{}}},methods:{cancalBooking:function(t){var e=this;this.$confirm(this.$t("myReservation.cancalBooking"),"提示",{confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel"),type:"warning"}).then(function(){var a={usrId:e.usrId,companyId:e.companyId,id:t.id,statusCode:"D_SALEMSRSTATUS6",ownCompanyId:e.ownCompanyId};o["m"].cancelMeasure(a).then(function(a){if(1==a){if(o["g"].clearAllCache(),e.$message({type:"success",message:e.$t("myReservation.successMessage")}),0!==Object.keys(e.$route.query).length)return void e.$router.push({path:"/order-list",query:{entrance:"我的预约"}});""!=e.statusId?e.getVolumeList(t.statusId):e.getVolumeList()}else e.$message({type:"info",message:e.$t("myReservation.cancal")})})}).catch(function(){e.$message({type:"info",message:e.$t("myReservation.noCancal")})})},deleteBooking:function(t){var e=this;this.$confirm(this.$t("myReservation.deleteBooking"),"提示",{confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel"),type:"warning"}).then(function(){var a={usrId:e.usrId,companyId:e.companyId,ids:t.id,ownCompanyId:e.ownCompanyId};o["m"].delSaleMeasure(a).then(function(a){if(1==a){if(e.$message({type:"success",message:e.$t("myReservation.successDelete")}),0!==Object.keys(e.$route.query).length)return void e.$router.push({path:"/order-list",query:{entrance:"我的预约"}});""!=e.statusId?e.getVolumeList(t.statusId):e.getVolumeList()}else e.$message({type:"info",message:e.$t("myReservation.failureDelete")})})}).catch(function(){e.$message({type:"info",message:e.$t("myReservation.noDelete")})})},bookingShow:function(t){this.booingInfor=t;var e="";0!==Object.keys(this.$route.query).length&&(e="订单新增预约量体"),this.$refs.addBooking.bookingShow(this.booingInfor,this.statusId,"",e),this.booingInfor=""},selectState:function(t){this.pagination.currentPage=1,this.pagination.page=1,this.statusId=t,this.getVolumeList(t)},handleCurrentChange:function(t){this.pagination.page=t,this.pagination.currentPage=t,this.getVolumeList(this.statusId)},getVolumeList:function(t){var e=this,a={usrId:this.usrId,companyId:this.companyId,searchUsrId:this.usrId};0!==Object.keys(this.$route.query).length?a.id=this.$route.query.bookingDetail.id:a={statusId:t,pageNum:this.pagination.page,pageSize:this.pagination.limit},console.log(a,"78789787"),o["m"].getVolumeList(a).then(function(a){var s=a.total,n=a.list,i=a.pages;e.pagination.count=s,i>0&&0==n.length&&(e.pagination.page=e.pagination.page-1,e.getVolumeList()),e.volumeList=n,e.volumeList.forEach(function(t){e.stateList.forEach(function(e){t.statusCode==e.value&&(t.text=e.txt)})}),void 0==t&&(e.state="")})}},beforeRouteEnter:function(t,e,a){Object(i["a"])(),a()},watch:{$route:{handler:function(t,e){"/my-reserve"==t.path&&this.getVolumeList()},deep:!0}},created:function(){this.getVolumeList()}},u=c,l=(a("91e6"),a("2877")),d=Object(l["a"])(u,s,n,!1,null,"12b78d62",null);e["default"]=d.exports},"91e6":function(t,e,a){"use strict";var s=a("471d"),n=a.n(s);n.a}}]);