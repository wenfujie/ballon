(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b7e4c74"],{"176d":function(t,s,e){"use strict";e.r(s);var o=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"wrapper"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.canShowCrumbs,expression:"canShowCrumbs"}],staticClass:"nav-attrs-form"},[t._l(t.crumbsList,function(s,o){return s.sortList.length>0?e("div",{key:s.id,staticClass:"nav-list"},[e("div",{staticClass:"nav-sort-name"},[t._v(t._s(s.escrumbsName))]),e("ul",{staticClass:"nav-sort-list",class:{more:!0===s.showMore}},[e("div",{directives:[{name:"show",rawName:"v-show",value:s.isShowMore,expression:"crumb.isShowMore"}],staticClass:"more-btn",on:{click:function(e){return t.sortToggle(s)}}},[t._v("\n                    "+t._s(!1===s.showMore?"更多":"收起")+"\n                    "),e("i",{staticClass:"iconfont icon-xiangxiajiantou",class:{more:!0===s.showMore}})]),e("div",{ref:"crumbLi"+o,refInFor:!0,staticClass:"crumbLi"},t._l(s.sortList,function(o,i){return e("li",{key:o.id,staticClass:"sort-item",class:{selected:s.selectedId===o.id}},[e("span",{staticClass:"sortName",on:{click:function(e){return t.choseCrumbsDetail(s,o.id)}}},[t._v(t._s(o.name))]),e("div",{directives:[{name:"show",rawName:"v-show",value:s.selectedId===o.id,expression:"crumb.selectedId === sort.id"}],staticClass:"delete",on:{click:function(e){return e.stopPropagation(),t.deleteSelect(s)}}},[e("i",{staticClass:"iconfont icon-guanbixiao"})])])}),0)])]):t._e()}),t.showBtnGroup?e("div",{staticClass:"sort-btn"},[e("span",{staticClass:"reset",on:{click:t.resetCrumbsArr}},[t._v("重置")]),e("span",{staticClass:"confirm-search",on:{click:t.getGoodsList}},[t._v("搜索")])]):t._e()],2),e("div",{staticClass:"filter"},[e("a",{staticClass:"sort",class:{selected:"recmSeq"===t.sortParam},on:{click:function(s){return t.changeSort("recmSeq")}}},[t._v("设计师推荐")]),e("a",{staticClass:"sort",class:{selected:"sales"===t.sortParam},on:{click:function(s){return t.changeSort("sales")}}},[t._v("销量优先")]),e("a",{staticClass:"sort",class:{selected:"price"===t.sortParam},on:{click:function(s){return t.changeSort("price")}}},[t._v("\n            价格\n            "),e("i",{staticClass:"iconfont icon-xiangxiajiantou",class:{rotate:"ASC"===t.sort}})])]),e("div",{staticClass:"goods-list"},[t.emptyStatus?e("div",{staticClass:"empty-content"},[e("p",[t._v(t._s(t.emptyGoodsTip))])]):t._e(),t.showList.length>0?e("ul",{staticClass:"clearfix"},t._l(t.showList,function(s,o){return e("li",{staticClass:"goods-item",on:{click:function(e){return t.goDetail(s)},mouseenter:function(e){return t.showCoverList(s,o)},mouseleave:function(e){return t.hideCoverList(s)}}},[e("div",{staticClass:"goods-cover"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.getImg(s.colorImgHover?s.colorImgUrl:s.glbFileUrl),expression:"getImg(!!item.colorImgHover ? item.colorImgUrl : item.glbFileUrl)"}],key:s.colorImgHover?s.colorImgUrl:s.glbFileUrl,staticClass:"cover-img"}),1===s.orderFlag?e("i",{staticClass:"iconfont icon-dingzhitubiao customization-flag"}):t._e()]),e("p",{staticClass:"goods-name font-small text-primary"},[t._v(t._s(s.goodsName))]),e("div",{staticClass:"price"},[e("span",{staticClass:"sale-price font-small color-red"},[t._v("￥"+t._s(s.salePrice))]),s.tagPrice&&parseInt(s.tagPrice)>0?e("span",{staticClass:"tag-price font-small text-secondary"},[t._v("￥"+t._s(s.tagPrice))]):t._e()]),0==s.orderFlag?e("div",{staticClass:"goods-color-list animated fadeIn"},[e("div",{staticClass:"color-imgs"},t._l(s.coverList,function(i){return e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.getImg(i.downloadUrl),expression:"getImg(colorImg.downloadUrl)"}],key:i.downloadUrl,attrs:{alt:""},on:{mouseenter:function(e){return t.colorImgHover(s,i.downloadUrl,o)},mouseleave:function(e){return t.colorImgMouseOut(s,o)}}})}),0)]):t._e()])}),0):t._e()]),t.total>0?e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.pageNum,"page-size":t.pageSize,total:t.total},on:{"current-change":t.onPageChagne}})],1):t._e()])},i=[],r=(e("7f7f"),e("55dd"),e("ac6a"),e("22ce")),a=e("5d2d"),n={data:function(){return{sortParam:"recmSeq",sortParamData:[{field:"recmSeq",order:"DESC"}],goodsList:[],showList:[],keyWord:"",ids:"",sort:"",showSelect:!1,isLoading:!0,finished:!1,pageNum:1,pageSize:10,total:null,actGoodsId:null,crumbsList:[],crumbsDetailList:[],mediaSearch:"",emptyStatus:null,delay:null}},methods:{pageInit:function(){this.keyWord=this.$route.query.keyWord||"",this.mediaSearch="",this.resetCrumbsArr(),this.showList=[],this.getCrumbsIds()},getGoodsList:function(){var t=this;JSON.stringify(this.keyWord)!==JSON.stringify(this.$store.state.goods.keyWords)&&(this.pageNum=1,this.emptyStatus=!1),this.mediaSearch="";var s=this.$store.state.goods.crumbs;if(JSON.stringify(s)!==JSON.stringify(this.crumbsArr)&&(this.pageNum=1,this.emptyStatus=!1),this.emptyStatus)this.getRcmdList();else{var e={busContsCode:a["a"].get("properties").busContsCode,shopId:a["a"].get("properties").shopId,pageNum:this.pageNum,pageSize:this.pageSize,couponId:this.$route.query.couponId?this.$route.query.couponId:"",origin:"",filters:this.crumbsArr.length>0?JSON.stringify(this.crumbsArr):this.crumbsArr,keyword:this.$route.query.keyWord||"",sortParam:JSON.stringify(this.sortParamData),platformCode:this.$route.query.classId?this.$route.query.classId:"",queryNullBusFlag:1,orderFlags:JSON.stringify([0,1])};this.isLoading=!0,c_showLoading(),r["d"].getGoodsList(e).then(function(s){t.$store.commit("goods/setData",{storeKey:"keyWords",storeValue:t.$route.query.keyWord||""}),t.ids=s.ptiPartHdIds,t.showList=s.hits,t.showList.length>0&&t.showList.forEach(function(t){t.coverList=[],t.colorImgHover=!1,t.colorImgUrl=null}),t.total=parseInt(s.pagination.totalCount),t.getCrumbsDetail(),t.$store.commit("goods/setCrumbsCache",t.crumbsArr),t.emptyStatus=t.showList.length<=0||null},function(t){}).then(function(){t.emptyStatus?t.getRcmdList():(t.isLoading=!1,c_showLoading(!1))})}},getRcmdList:function(){var t=this;JSON.stringify(this.keyWord)!==JSON.stringify(this.$store.state.goods.keyWords)&&(this.pageNum=1,this.emptyStatus=!1);var s=this.$store.state.goods.crumbs;JSON.stringify(s)!==JSON.stringify(this.crumbsArr)&&(this.pageNum=1);var e={busContsCode:a["a"].get("properties").busContsCode,shopId:a["a"].get("properties").shopId,pageNum:this.pageNum,pageSize:this.pageSize,queryNullBusFlag:1,orderFlags:JSON.stringify([0,1]),sortParam:JSON.stringify(this.sortParamData)};r["d"].getGoodsList(e).then(function(s){t.$store.commit("goods/setData",{storeKey:"keyWords",storeValue:t.$route.query.keyWord||""}),t.ids=s.ptiPartHdIds,t.showList=s.hits,t.showList.length>0&&t.showList.forEach(function(t){t.coverList=[]}),t.total=parseInt(s.pagination.totalCount),t.$store.commit("goods/setCrumbsCache",t.crumbsArr),t.isLoading=!1,c_showLoading(!1)},function(s){t.isLoading=!1,c_showLoading(!1)})},getCrumbsDetail:function(){var t=this;if(this.ids){var s={ptiPartHdIds:this.ids};if(this.crumbsList.length>0)this.crumbsList.forEach(function(t){(!t.sortList||t.sortList.length<=0)&&(t.sortList=[])}),r["b"].getCrumbsDetail(s).then(function(s){s.length&&!!s.length>0&&(t.crumbsList.forEach(function(t){s.forEach(function(s){t.sortList.length<=0&&t.escrumbsCode==s.crumbsCode&&(t.sortList=s.crumbsList)})}),t.getResolution())});else var e=0,o=setInterval(function(){(t.crumbsList.length>0||++e>=100)&&(clearInterval(o),r["b"].getCrumbsDetail(s).then(function(s){s.length&&!!s.length>0&&(t.crumbsList.forEach(function(t){s.forEach(function(s){t.sortList.length<=0&&t.escrumbsCode==s.crumbsCode&&(t.sortList=s.crumbsList)})}),t.getResolution())}))},100)}},getCrumbsIds:function(){var t=this;if(c_showLoading(),this.$route.query.keyWord){var s={busContsCode:a["a"].get("properties").busContsCode,shopId:a["a"].get("properties").shopId,pageNum:this.pageNum,pageSize:this.pageSize,couponId:this.$route.query.couponId?this.$route.query.couponId:"",origin:"",filters:this.crumbsArr.length>0?JSON.stringify(this.crumbsArr):this.crumbsArr,keyword:this.$route.query.keyWord||"",sortParam:JSON.stringify(this.sortParamData),platformCode:this.$route.query.classId?this.$route.query.classId:"",queryNullBusFlag:1,orderFlags:JSON.stringify([0,1])};r["d"].getCrumbsGoodsIds(s).then(function(s){t.getCrumbs(s.join(","),t.getGoodsList())},function(){t.getCrumbs(null,t.getGoodsList())})}else this.getCrumbs(null,this.getGoodsList())},getCrumbs:function(t,s){var e=this,o={busContsCode:a["a"].get("properties").busContsCode,pageSize:0,pageNum:0,goodsClassIds:t||null};this.$route.query.classId&&(o.platformCode=this.$route.query.classId),r["b"].getCrumbs(o).then(function(t){t.list.forEach(function(t){t.sortList=[],t.selectedId="",t.showMore=!1}),e.crumbsList=t.list,s&&s()})},sortToggle:function(t){t.showMore=!t.showMore,this.$set(t,"showMore",t.showMore)},onPageChagne:function(t){this.isLoading||(this.pageNum=t,this.getGoodsList())},changeSort:function(t){"price"!==t&&t===this.sortParam||(this.sortParam!==t&&(this.goodsList=[],this.pageNum=1),this.sortParam=t,"recmSeq"===this.sortParam?this.sortParamData=[{field:"recmSeq",order:"DESC"}]:"sales"===this.sortParam?this.sortParamData=[{field:"sales",order:"DESC"}]:"price"===this.sortParam&&("DESC"===this.sort?(this.sort="ASC",this.pageNum=1,this.sortParamData=[{field:"price",order:"ASC"}],this.goodsList=[]):(this.sort="DESC",this.pageNum=1,this.sortParamData=[{field:"price",order:"DESC"}],this.goodsList=[])),this.getGoodsList(t))},choseCrumbsDetail:function(t,s){t.selectedId!==s&&(t.selectedId=s,this.emptyStatus&&(this.emptyStatus=!1))},deleteSelect:function(t){t.selectedId="",this.emptyStatus&&(this.emptyStatus=!1)},goDetail:function(t){1===t.orderFlag?this.$router.push("/goods-design?goodsCode="+t.goodsCode+"&goodsId="+t.ptiPartHdId):0===t.orderFlag?this.$router.push("/goods-detail?goodsCode="+t.goodsCode+"&goodsId="+t.ptiPartHdId):alert("巴龙PC端，产品立了字据不会有组合商品的需求！！！！！！！")},getGoodsCoverList:function(t,s){var e=this,o={count:4,partIds:[t.ptiPartHdId]};r["d"].getGoodsCoverList(o).then(function(o){t.coverList=o[t.ptiPartHdId],e.$set(e.showList,s,t),e.$store.commit("goods/setCoverCache",{id:t.ptiPartHdId,list:o[t.ptiPartHdId]})})},showCoverList:function(t,s){0==t.orderFlag&&(t.ptiPartHdId===this.actGoodsId&&t.coverList.length>0||(t.coverList.length<=0&&(this.$store.state.goods.coverCache[t.ptiPartHdId]?(t.coverList=this.$store.state.goods.coverCache[t.ptiPartHdId],this.$set(this.showList,s,t)):this.getGoodsCoverList(t,s)),this.actGoodsId=t.ptiPartHdId))},hideCoverList:function(t){this.actGoodsId=null},resetCrumbsArr:function(){this.crumbsList.forEach(function(t){t.selectedId=""}),this.emptyStatus&&(this.emptyStatus=!1)},ctrMoreBtn:function(t){var s=this;this.$nextTick(function(){s.crumbsList.forEach(function(t,e){t.sortList.forEach(function(t){t.name});var o=s.$refs["crumbLi"+e];o&&o.length>0&&o[0].clientHeight>60?t.isShowMore=!0:t.isShowMore=!1}),s.crumbsList.splice(s.crumbsList.length)})},getResolution:function(){var t=document.documentElement.clientWidth;if(t<1200){if("lessthen"==this.mediaSearch)return;this.mediaSearch="lessthen",this.ctrMoreBtn(748)}else{if("morethen"==this.mediaSearch)return;this.mediaSearch="morethen",this.ctrMoreBtn(978)}},colorImgHover:function(t,s,e){console.log("in"),t.colorImgHover=!0,t.colorImgUrl=s,this.$set(this.showList,e,t)},colorImgMouseOut:function(t,s){console.log("out"),t.colorImgHover=!1,t.colorImgUrl=null,this.$set(this.showList,s,t)}},created:function(){this.pageInit()},mounted:function(){var t=this;window.onresize=function(){t.getResolution()}},watch:{$route:function(t,s){"/goods-list"===t.path&&this.pageInit()}},computed:{canShowCrumbs:function(){var t=!1;if(this.crumbsList.length<=0)return t=!1,t;for(var s=0;s<this.crumbsList.length;s++){var e=this.crumbsList[s];if(e.sortList.length>0)return t=!0,t}},crumbsArr:function(){var t=[],s=[],e={};return this.crumbsList.length>0&&(this.crumbsList.forEach(function(t){""!==t.selectedId&&(e.queryField=t.escrumbsCode,e.value=t.selectedId,s.push(e),e={})}),s.length>0&&(t=[{operate:"AND",filterList:s}])),t},showBtnGroup:function(){for(var t=!1,s=0;s<this.crumbsList.length;s++){var e=this.crumbsList[s];if(e.sortList&&e.sortList.length>0)return t=!0,t}return t},emptyGoodsTip:function(){var t="";this.crumbsList.forEach(function(s){s.selectedId&&s.sortList.forEach(function(e){e.id===s.selectedId&&(t+=' "'.concat(e.name,'"'))})});var s=this.keyWord?'"'.concat(this.keyWord,'"'):"相关";return"抱歉，没有找到"+s+t+"的搜索结果，为您推荐以下热门商品"}}},c=n,u=(e("c759"),e("2877")),l=Object(u["a"])(c,o,i,!1,null,"1f4cc37e",null);s["default"]=l.exports},c759:function(t,s,e){"use strict";var o=e("f1f2"),i=e.n(o);i.a},f1f2:function(t,s,e){}}]);