(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a9f4491"],{"04d2":function(e,t,o){},"59f7":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"wrapper"},[o("div",{staticClass:"main"},[o("p",{staticClass:"title"},[e._v(e._s(e.$t("login.findPsw")))]),o("ul",{staticClass:"flex-box step-cont"},e._l(e.stepList,function(t,i){return o("li",{class:["flex-box","progress-item",{success:e.stepCode>=i+1}]},[o("div",{staticClass:"progress-bar"}),o("div",{class:["progress-num"]},[e._v("\n                    "+e._s(t.id)+"\n                    "),o("p",{staticClass:"step-describe"},[e._v(e._s(t.text))])]),o("div",{staticClass:"progress-bar"})])}),0),o("el-form",{directives:[{name:"show",rawName:"v-show",value:1==e.stepCode,expression:"stepCode == 1"}],ref:"rulesFindPsd",staticClass:"list",attrs:{rules:e.rulesFindPsd,model:e.form,"label-width":"130px"}},[o("el-form-item",{attrs:{label:e.$t("login.phoneNumber")+"：",prop:"phone"}},[o("el-input",{attrs:{maxlength:"11",placeholder:e.$t("login.writePhone")},nativeOn:{keyup:function(t){return e.c_limitInputDigit("form.phone")}},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),o("el-form-item",{attrs:{label:e.$t("login.noteCode")+"：",prop:"noteCode"}},[o("div",{staticClass:"flex-box all-width"},[o("el-input",{attrs:{maxlength:"6",placeholder:e.$t("login.writeNoteCode")},nativeOn:{keyup:function(t){return e.c_limitInputDigit("form.noteCode")}},model:{value:e.form.noteCode,callback:function(t){e.$set(e.form,"noteCode",t)},expression:"form.noteCode"}}),o("div",{class:["verification-code-btn",{countDown:e.countDownCode>0}],on:{click:e.getNoteCode}},[e._v("\n                        "+e._s(e.$t("common.getNoteCode"))+"\n                        "),o("span",{directives:[{name:"show",rawName:"v-show",value:e.countDownCode>0,expression:"countDownCode>0"}]},[e._v(e._s(e.countDownCode)+"s")])])],1)]),o("el-form-item",{attrs:{label:e.$t("login.imgCode")+"：",prop:"identifyCode"}},[o("div",{staticClass:"img-code"},[o("el-input",{attrs:{maxlength:"4",placeholder:e.$t("login.writeImgCode")},nativeOn:{keyup:function(t){return e.c_limitInputDigit("form.identifyCode")}},model:{value:e.form.identifyCode,callback:function(t){e.$set(e.form,"identifyCode",t)},expression:"form.identifyCode"}}),o("div",{staticClass:"verification-code"},[o("identify",{ref:"identify",attrs:{colorMin:125,colorMax:125,lineColorMin:180,lineColorMax:255,dotColorMin:255,dotColorMax:255,fontSizeMin:34,contentWidth:100,identifyCode:e.identifyCode},on:{"update:identifyCode":function(t){e.identifyCode=t},"update:identify-code":function(t){e.identifyCode=t},handleClickPanel:e.handleClickPanel}})],1)],1)])],1),o("ul",{directives:[{name:"show",rawName:"v-show",value:1==e.stepCode,expression:"stepCode == 1"}],staticClass:"center-style"},[o("li",{staticClass:"item flex-box"},[o("p",{staticClass:"label"}),o("div",{class:["register-btn","all-width","is-read"],on:{click:e.handleEmit}},[e._v("\n                    "+e._s(e.$t("common.submit"))+"\n                ")])])]),o("el-form",{directives:[{name:"show",rawName:"v-show",value:2==e.stepCode,expression:"stepCode == 2"}],ref:"rulesSetPsd",staticClass:"list",attrs:{rules:e.rulesSetPsd,model:e.form,"label-width":"130px"}},[o("el-form-item",{attrs:{label:e.$t("login.newPsw")+"：",prop:"psw"}},[o("el-input",{attrs:{placeholder:e.$t("login.pswWriteLimit"),maxlength:"20",type:e.pswInputType1},nativeOn:{keydown:function(t){return t.type.indexOf("key")||32===t.keyCode?e.keydownEvent(t):null}},model:{value:e.form.psw,callback:function(t){e.$set(e.form,"psw",t)},expression:"form.psw"}},[o("i",{class:["iconfont","icon-baomi1",{"icon-xianshi":"text"==e.pswInputType1}],attrs:{slot:"suffix"},on:{click:function(t){return e.changePswState("pswInputType1")}},slot:"suffix"})])],1),o("el-form-item",{attrs:{label:e.$t("login.surePsw")+"：",prop:"pswSure"}},[o("el-input",{attrs:{placeholder:e.$t("login.pswWriteLimit"),maxlength:"20",type:e.pswInputType2},nativeOn:{keydown:function(t){return t.type.indexOf("key")||32===t.keyCode?e.keydownEvent(t):null}},model:{value:e.form.pswSure,callback:function(t){e.$set(e.form,"pswSure",t)},expression:"form.pswSure"}},[o("i",{class:["iconfont","icon-baomi1",{"icon-xianshi":"text"==e.pswInputType2}],attrs:{slot:"suffix"},on:{click:function(t){return e.changePswState("pswInputType2")}},slot:"suffix"})])],1)],1),o("ul",{directives:[{name:"show",rawName:"v-show",value:2==e.stepCode,expression:"stepCode == 2"}],staticClass:"center-style"},[o("li",{staticClass:"item flex-box"},[o("p",{staticClass:"label"}),o("div",{class:["register-btn","all-width","is-read"],on:{click:e.handleEmit}},[e._v("\n                    "+e._s(e.$t("common.submit"))+"\n                ")])])]),o("ul",{directives:[{name:"show",rawName:"v-show",value:3==e.stepCode,expression:"stepCode == 3"}],staticClass:"list"},[o("li",{staticClass:"item flex-hcenter"},[o("i",{staticClass:"iconfont icon-chenggong"}),o("span",{staticClass:"success-text"},[e._v(e._s(e.$t("login.pswSetSuccess")))])])])],1)])},s=[],n=o("22ce"),r=o("19e7"),a=o.n(r),l=o("2faa"),d=o("393c"),c={components:{Identify:l["a"]},mixins:[d["a"]],data:function(){return{btnLock:!1,countDownCode:0,stepCode:1,identifyCode:"",form:{phone:"",psw:"",pswSure:"",noteCode:"",identifyCode:""},pswInputType1:"password",pswInputType2:"password",rulesFindPsd:{phone:[{required:!0,validator:this.validatePhone,trigger:"blur"}],noteCode:[{required:!0,validator:this.validateVerificationCode,trigger:"blur"}],identifyCode:[{required:!0,validator:this.validateImgCode,trigger:"blur"}]},rulesSetPsd:{psw:[{required:!0,validator:this.validatePassword,trigger:"blur"}],pswSure:[{required:!0,validator:this.checkoutSurePsd,trigger:"blur"}]}}},computed:{},methods:{changePswState:function(e){this[e]="password"==this[e]?"text":"password"},checkoutPhoneRegister:function(e){var t=this,o={usrId:0,mobile:this.form.phone,buscontsId:Storage.get("properties").busContsCode};n["l"].checkPhone(o).then(function(e){t.$message.error(t.$t("login.unregisteredPhone"))},function(o){500==o.statusCode&&(880201006==o.errorCode?"function"==typeof e&&e():t.$message.error(o.errorMsg))})},checkoutSurePsd:function(e,t,o){if(this.form.psw!=this.form.pswSure)return o(new Error(this.$t("login.differentPsw")));o()},keydownEvent:function(e){return e.preventDefault(),!1},handleClickPanel:function(){this.$refs.identify.refreshCode()},handleEmit:function(){var e=this,t={};1==this.stepCode?this.$refs.rulesFindPsd.validate(function(o){return!!o&&(e.form.identifyCode!=e.identifyCode?(e.$message.error(e.$t("login.imgCodeError")),!1):(t={mobilePhone:e.form.phone,registCode:e.form.noteCode,verifyClassCode:"VERIFY_FIND_PWD",verifyType:"D_VERIFYLOG",onlyVerify:1},void n["l"].checkCaptcha(t).then(function(t){1==t&&(e.stepCode=2)},function(t){e.errorTip(t)})))}):2==this.stepCode&&this.$refs.rulesSetPsd.validate(function(o){if(!o)return!1;t={mobile:e.form.phone,registerCode:e.form.noteCode,password:a()(e.form.psw)},n["l"].retrievePassword(t).then(function(t){1==t?(e.stepCode=3,setTimeout(function(){e.$router.push("/login")},2e3)):e.$message.error(e.$t("login.findPswFail"))},function(t){e.errorTip(t)})})},errorTip:function(e){e.errorMsg&&this.$message.error(e.errorMsg)},getNoteCode:function(){var e=this;if(!this.btnLock){if(this.btnLock=!0,!isPhone(this.form.phone))return this.btnLock=!1,void this.$message.error(this.$t("login.writeTruePhone"));var t=function(){c_showLoading();var t={mobile:e.form.phone,verifyClassCode:"VERIFY_FIND_PWD"};n["l"].getCaptcha(t).then(function(t){"03"==t||"OK"==t?(e.countDownCode=60,e.countDown=setInterval(function(){e.countDownCode<=0&&(e.btnLock=!1,clearInterval(e.countDown)),e.countDownCode--},1e3)):(e.btnLock=!1,e.$message.error(e.$t("common.messageSendFail")))},function(t){e.btnLock=!1}).then(function(){c_showLoading(!1)})};this.checkoutPhoneRegister(t)}}},created:function(){this.stepList=[{id:1,text:this.$t("login.authentication")},{id:2,text:this.$t("login.setPassword")},{id:3,text:this.$t("login.setSuccess")}]}},u=c,p=(o("cb0f"),o("2877")),f=Object(p["a"])(u,i,s,!1,null,"7c89c554",null);t["default"]=f.exports},cb0f:function(e,t,o){"use strict";var i=o("04d2"),s=o.n(i);s.a}}]);