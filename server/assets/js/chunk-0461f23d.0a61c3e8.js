(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0461f23d"],{2816:function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"wrapper"},[o("el-form",{ref:"rulesRegister",staticClass:"list",attrs:{rules:e.rulesRegister,model:e.form,"label-width":"130px"}},[o("el-form-item",{attrs:{label:e.$t("login.setUserName")+"：",prop:"name"}},[o("el-input",{attrs:{clearable:"",placeholder:e.$t("login.writeUserName")},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"===typeof t?t.trim():t)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:e.$t("login.setPsw")+"：",prop:"psw"}},[o("el-input",{attrs:{autocomplete:"off",placeholder:e.$t("login.pswWriteLimit"),type:e.pswInputType1,maxlength:"20"},nativeOn:{keydown:function(t){return t.type.indexOf("key")||32===t.keyCode?e.keydownEvent(t):null}},model:{value:e.form.psw,callback:function(t){e.$set(e.form,"psw",t)},expression:"form.psw"}},[o("i",{class:["iconfont","icon-baomi1",{"icon-xianshi":"text"==e.pswInputType1}],attrs:{slot:"suffix"},on:{click:function(t){return e.changePswState("pswInputType1")}},slot:"suffix"})])],1),o("el-form-item",{attrs:{label:e.$t("login.sureLoginPsw")+"：",prop:"pswSure"}},[o("el-input",{attrs:{autocomplete:"off",placeholder:e.$t("login.pswWriteLimit"),type:e.pswInputType2,maxlength:"20"},nativeOn:{keydown:function(t){return t.type.indexOf("key")||32===t.keyCode?e.keydownEvent(t):null}},model:{value:e.form.pswSure,callback:function(t){e.$set(e.form,"pswSure",t)},expression:"form.pswSure"}},[o("i",{class:["iconfont","icon-baomi1",{"icon-xianshi":"text"==e.pswInputType2}],attrs:{slot:"suffix"},on:{click:function(t){return e.changePswState("pswInputType2")}},slot:"suffix"})])],1),o("el-form-item",{attrs:{label:e.$t("login.phoneNumber")+"：",prop:"phone"}},[o("el-input",{attrs:{maxlength:"11",placeholder:e.$t("login.writePhone")},nativeOn:{keyup:function(t){return e.c_limitInputDigit("form.phone")}},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),o("el-form-item",{attrs:{label:e.$t("login.noteCode")+"：",prop:"noteCode"}},[o("div",{staticClass:"flex-box all-width"},[o("el-input",{staticClass:"verifict-input",attrs:{maxlength:"6",placeholder:e.$t("login.writeNoteCode")},nativeOn:{keyup:function(t){return e.c_limitInputDigit("form.noteCode")}},model:{value:e.form.noteCode,callback:function(t){e.$set(e.form,"noteCode",t)},expression:"form.noteCode"}}),o("div",{class:["verification-code-btn",{countDown:e.countDownCode>0}],on:{click:e.getNoteCode}},[e._v("\n                    "+e._s(e.$t("common.getNoteCode"))+"\n                    "),o("span",{directives:[{name:"show",rawName:"v-show",value:e.countDownCode>0,expression:"countDownCode>0"}]},[e._v(e._s(e.countDownCode)+"s")])])],1)])],1),o("ul",{staticClass:"list"},[o("li",{staticClass:"item flex-box"},[o("p",{staticClass:"label"}),o("div",{staticClass:"register-operator all-width"},[o("el-checkbox",{model:{value:e.checkBox,callback:function(t){e.checkBox=t},expression:"checkBox"}},[e._v(e._s(e.$t("login.readConsent")))]),o("span",{staticClass:"clause",on:{click:function(t){e.zcxyDialogVisible=!0}}},[e._v("《"+e._s(e.$t("login.RegistrationTerms"))+"》")])],1)]),o("li",{staticClass:"item flex-box"},[o("p",{staticClass:"label"}),o("div",{class:["register-btn","all-width",{"is-read":e.checkBox}],on:{click:e.handleRegister}},[e._v("\n                "+e._s(e.usrId?e.$t("login.FillInTheComplete"):e.$t("login.register"))+"\n                "),o("span",{staticClass:"login-link",on:{click:function(t){return t.stopPropagation(),e.$router.push("/login")}}},[e._v(e._s(e.$t("login.toLogin")))])])])]),o("el-dialog",{attrs:{title:e.article.title,visible:e.zcxyDialogVisible,width:"50%",center:""},on:{"update:visible":function(t){e.zcxyDialogVisible=t}}},[o("div",{staticClass:"salon-content",domProps:{innerHTML:e._s(e.article.content)}}),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.clickDialogBtn}},[e._v(e._s(e.$t("login.endorse")))])],1)])],1)},n=[],r=(o("a481"),o("96cf"),o("3b8d")),i=(o("7f7f"),o("22ce")),a=o("19e7"),c=o.n(a),l=o("393c"),u=o("31c2"),p={components:{},mixins:[l["a"],u["a"]],data:function(){return{btnLock:!1,zcxyDialogVisible:!1,checkBox:!0,countDownCode:0,pswInputType1:"password",pswInputType2:"password",form:{name:"",psw:"",pswSure:"",phone:"",noteCode:""},article:{},usrId:"",rulesRegister:{name:[{required:!0,validator:this.validateAccount,trigger:"blur"}],psw:[{required:!0,validator:this.validatePassword,trigger:"blur"}],pswSure:[{required:!0,validator:this.checkoutSurePsd,trigger:"blur"}],phone:[{required:!0,validator:this.validatePhone,trigger:"blur"}],noteCode:[{required:!0,validator:this.validateVerificationCode,trigger:"blur"}]}}},methods:{checkoutSurePsd:function(e,t,o){if(this.form.psw!=this.form.pswSure)return o(new Error(this.$t("login.differentPsw")));o()},clickDialogBtn:function(){this.checkBox=!0,this.zcxyDialogVisible=!1},keydownEvent:function(e){return e.preventDefault(),!1},changePswState:function(e){this[e]="password"==this[e]?"text":"password"},handleRegister:function(){var e=this;this.checkBox&&this.$refs.rulesRegister.validate(function(t){if(!t)return!1;if(e.usrId){var o={mobilePhone:e.form.phone,registCode:e.form.noteCode,verifyClassCode:"VERIFY_BIND_MOBILE",onlyVerify:1};i["l"].checkCaptcha(o).then(function(t){e.bindEvent()},function(t){t.errorMsg&&e.$message.error(t.errorMsg)})}else e.registerEvent()})},registerEvent:function(){var e=this,t={loginName:this.form.name,password:c()(this.form.psw),mobile:this.form.phone,registerCode:this.form.noteCode,busContsCode:Storage.get("properties").busContsCode};i["l"].vipRegister(t).then(function(t){1==t&&(e.$message.success(e.$t("login.registerSuccess")),setTimeout(function(){e.accountLogin()},2e3))},function(t){t.errorMsg&&e.$message.error(t.errorMsg)})},accountLogin:function(){var e=this;this.m_passwordLogin(this.form.phone,this.form.psw).then(function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(o){var s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(200!=o.statusCode){t.next=10;break}if(s=o.data,!s.usrId){t.next=10;break}if(s.cardNo){t.next=6;break}return t.next=6,e.m_sendCardCoupons(s.usrId,s.vipInfoId);case 6:Storage.set("USER_INFO",{usrId:s.usrId,shopId:Storage.get("properties").shopId,shopCode:Storage.get("properties").shopCode,vipInfoId:s.vipInfoId},e.userExpire),e.$store.dispatch("user/getUserInfo"),e.$store.dispatch("user/getShoppingCart"),e.$router.push("/index");case 10:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},bindEvent:function(){var e=this,t={usrId:this.usrId,usrLoginName:this.form.name,pwd:c()(this.form.psw),usrMobile:this.form.phone};i["a"].updateUserInfo(t).then(function(t){1==t&&(e.$message.success(e.$t("login.submitInfoSuccess")),Storage.set("USER_INFO",{usrId:e.usrId,shopId:Storage.get("properties").shopId,shopCode:Storage.get("properties").shopCode},e.userExpire),e.$store.dispatch("user/getUserInfo"),e.$store.dispatch("user/getShoppingCart"),setTimeout(function(){e.$router.push(e.successUrl?e.successUrl:"/index")},3e3))},function(t){t.errorMsg&&e.$message.error(t.errorMsg)})},getNoteCode:function(){var e=this;if(!this.btnLock){if(this.btnLock=!0,!isPhone(this.form.phone))return this.$message.error(this.$t("login.writeTruePhone")),void(this.btnLock=!1);var t=function(){c_showLoading();var t={mobile:e.form.phone,verifyClassCode:"VERIFY_BIND_MOBILE"};i["l"].getCaptcha(t).then(function(t){"03"==t||"OK"==t?(e.countDownCode=60,e.countDown=setInterval(function(){e.countDownCode<=0&&(e.btnLock=!1,clearInterval(e.countDown)),e.countDownCode--},1e3)):(e.btnLock=!1,e.$message.error("短信发送失败"))},function(t){e.btnLock=!1}).then(function(){c_showLoading(!1)})};this.checkoutPhoneRegister(t)}},checkoutPhoneRegister:function(e){var t=this,o={usrId:0,mobile:this.form.phone,buscontsId:Storage.get("properties").busContsCode};i["l"].checkPhone(o).then(function(t){"function"==typeof e&&e()},function(e){500==e.statusCode&&(t.btnLock=!1,t.$message.error(e.errorMsg))})},getArticleList:function(){var e=this,t={effFlag:1,seqType:1,articleCatCode:"zcxy"};i["i"].getList(t).then(function(t){if(t.length){var o=t[0];e.article=o;var s=o.content.replace(/<img [^>]*src=['"]([^'"]+)[^>]*>/gi,function(e,t){var o=t.indexOf("=")+1,s=getImg(t.substring(o,e.length));return'<img src="'+s+'" style="width: 100%; display: block; margin: 0;">'});e.article.content=s}})}},created:function(){this.userExpire=3600,this.usrId=this.$route.query.usrId,this.successUrl=decodeURIComponent(this.$route.query.successUrl||""),this.getArticleList()}},d=p,f=(o("e904"),o("2877")),h=Object(f["a"])(d,s,n,!1,null,"3ffb73e9",null);t["default"]=h.exports},7196:function(e,t,o){},e904:function(e,t,o){"use strict";var s=o("7196"),n=o.n(s);n.a}}]);