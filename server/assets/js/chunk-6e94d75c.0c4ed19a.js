(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e94d75c"],{"4b13":function(t,e,a){"use strict";var i=a("5afb"),s=a.n(i);s.a},5466:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("div",{staticClass:"main-cont flex-vcenter"},[1===t.pageState||2===t.pageState||3===t.pageState?a("div",{staticClass:"pay-state"},[a("i",{class:["iconfont","pay-state-img",{"icon-chenggong":"success"==t.payResult,"icon-guanbi":"failed"==t.payResult}]}),a("p",{staticClass:"pay-state-text"},[t._v("\n                "+t._s("success"==t.payResult?t.$t("pay.paySuccess"):t.$t("pay.payFail"))+"\n                "),1===t.pageState?a("span",[t._v(t._s(t.timekeeping)+"s")]):t._e()]),1===t.pageState?a("div",{staticClass:"pay-btn",on:{click:t.pageSwitch}},[t._v("\n                "+t._s("success"==t.payResult?t.$t("pay.viewBillDetail"):t.$t("pay.payGoOn"))+"\n            ")]):a("div",[t.showInfo.routerList.length>=1?a("div",{staticClass:"pay-btn",on:{click:function(e){return t.goPage(t.showInfo.routerList[0].url)}}},[t._v(t._s(t.showInfo.routerList[0].title))]):t._e(),t.showInfo.routerList.length>=2?a("div",{staticClass:"pay-btn mgT30",on:{click:function(e){return t.goPage(t.showInfo.routerList[1].url)}}},[t._v(t._s(t.showInfo.routerList[1].title))]):t._e()])]):t._e(),a("ul",{staticClass:"main-cont-list"},[a("li",{staticClass:"list-item flex-box"},[a("div",{staticClass:"label"},[t._v(t._s(t.$t("pay.payGold"))+"：")]),a("p",{staticClass:"price"},[t._v("\n                    ¥"+t._s(1==t.pageState||2==t.pageState||3==t.pageState||4==t.pageState&&t.orderType?t.actuallyPaid:t.billInfo.amountUnPay)+"\n                ")])]),2===t.pageState||3===t.pageState||4===t.pageState&&t.orderType?a("li",{staticClass:"list-item flex-box"},[a("div",{staticClass:"label"},[t._v(t._s(t.$t("pay.billGood"))+"：")]),a("p",[t._v(t._s(t.showInfo.name))])]):t._e(),a("li",{staticClass:"list-item flex-box"},[a("div",{staticClass:"label"},[t._v(t._s(t.$t("pay.billNumber"))+"：")]),a("p",[t._v(t._s(t.billCode))])]),1===t.pageState||4===t.pageState&&!t.orderType?a("li",{staticClass:"list-item flex-box"},[a("div",{staticClass:"label label-set-height"},[t._v(t._s(t.$t("pay.billGood"))+"：")]),a("ul",t._l(t.billInfo.goodsList,function(e,i){return a("li",{staticClass:"good-name"},[t._v(t._s(e.goodsName))])}),0)]):t._e(),1===t.pageState||4===t.pageState&&!t.orderType?a("li",{staticClass:"list-item flex-box"},[a("div",{staticClass:"label"},[t._v(t._s(t.$t("pay.receiveAddress"))+"：")]),a("p",[t._v(t._s(t.billInfo.cargoUsrName+" "+t.billInfo.cargoMobile+" "+t.billInfo.cargoStateName+t.billInfo.cargoCityName+t.billInfo.cargoDestName+t.billInfo.cargoAddress+" "+("mdzq"===t.billInfo.shippingWayCode?t.billInfo.recptdptName:"")))])]):t._e()])])])},s=[],r=(a("c5f6"),a("22ce")),o={components:{},data:function(){return{billInfo:{},timekeeping:5,showInfo:{name:"",routerList:[]}}},props:{billCode:String,payResult:String,orderType:{type:String,default:""},actuallyPaid:[String,Number]},computed:{pageState:function(){if(!this.payResult)return 4;switch(!0){case!this.orderType:return 1;case"D_CARDORD"===this.orderType:return 2;case"D_COUPONSORD"===this.orderType:return 3}}},methods:{goPage:function(t){this.$router.push(t)},getBillInfo:function(){var t=this,e={busContsCode:Storage.get("properties").busContsCode,billCode:this.billCode};c_showLoading(),r["g"].getDetailInfo(e).then(function(e){t.billInfo=e,c_showLoading(!1),t.$emit("getBillInfoSuc",e)})},pageSwitch:function(){this.interval&&clearInterval(this.interval),this.$emit("pageSwitch")}},created:function(){"D_CARDORD"===this.orderType&&(this.showInfo={name:this.$t("pay.membershipCard"),routerList:[{id:1,title:this.$t("pay.viewMembershipCard"),url:"/member-card"},{id:2,title:this.$t("pay.toMembership"),url:"/member-center"}]}),"D_COUPONSORD"===this.orderType&&(this.showInfo={name:this.$t("pay.coupon"),routerList:[{id:1,title:this.$t("pay.myCoupon"),url:"/vouchers-list"},{id:2,title:this.$t("pay.takeCoupon"),url:"/vouchers-center"}]})},mounted:function(){var t=this;(1===this.pageState||4===this.pageState&&!this.orderType)&&this.getBillInfo(),1===this.pageState&&(this.interval=setInterval(function(){1!=t.timekeeping?t.timekeeping--:t.pageSwitch()},1e3))}},n=o,l=(a("ff0f"),a("2877")),c=Object(l["a"])(n,i,s,!1,null,"4ea334a6",null);e["a"]=c.exports},"5afb":function(t,e,a){},"6bcf":function(t,e,a){t.exports=a.p+"img/weixin.8b59ad4d.png"},"6be9":function(t,e,a){},d476:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper"},[a("div",{staticClass:"pay-table"},[a("order-info-table",{attrs:{billCode:t.billCode,orderType:this.orderType,actuallyPaid:t.actuallyPaid},on:{getBillInfoSuc:t.getBillInfoSuc}})],1),a("div",{staticClass:"pay-mode"},[a("div",{staticClass:"pay-title"},[t._v(t._s(t.$t("pay.payMode")))]),a("ul",{staticClass:"flex-box pay-list"},t._l(t.payList,function(e,i){return a("li",{key:i,staticClass:"pay-item flex-vcenter"},[a("el-radio",{attrs:{label:e.paymentCode},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[a("img",{attrs:{src:e.imgName,alt:""}})])],1)}),0)]),a("div",{staticClass:"flex-end"},[a("div",{staticClass:"pay-btn",on:{click:t.toPay}},[t._v(t._s(t.$t("pay.pay")))])]),t.html?a("div",{domProps:{innerHTML:t._s(t.html)}}):t._e()])},s=[],r=(a("ac6a"),a("a481"),a("5466")),o=a("22ce"),n=a("ec02"),l=a("1115"),c={components:{orderInfoTable:r["a"]},data:function(){return{radio:"",billCode:"",payList:[],html:""}},methods:{getBillInfoSuc:function(t){this.actuallyPaid=t.amountUnPay},toPay:function(){var t=this;if("D_WEIXIN"==this.radio)this.$router.push("/pay-wx?billCode="+this.billCode+"&actuallyPaid="+this.actuallyPaid+(this.successUrl?"&successUrl="+this.successUrl:"")+(this.orderType?"&orderType="+this.orderType:""));else if("D_ALIPAY"==this.radio){var e=window.location.origin+"".concat(baseConstant.pathProjectName?"/"+baseConstant.pathProjectName:"")+(this.successUrl?decodeURIComponent(this.successUrl):"/pay-state?billCode="+this.billCode+"&payResult=success"+(this.orderType?"&orderType="+this.orderType:"")+(this.actuallyPaid?"&actuallyPaid="+this.actuallyPaid:""));n["a"].aliPay(this,this.billCode,this.actuallyPaid,e,this.orderType).then(function(e){t.base=new l["a"],t.html=t.base.decode(e.aliPayHtml),t.$nextTick(function(){document.forms[0].submit()})},function(e){t.orderType?t.$message.error(t.$t("pay.payError")):t.$router.replace("/pay-state?billCode="+t.billCode+"&payResult=failed&actuallyPaid="+t.actuallyPaid)})}},getPayList:function(){var t=this,e={dptId:Storage.get("properties").shopId,allFlag:1};o["a"].getPayList(e).then(function(e){e.forEach(function(t){"D_WEIXIN"==t.paymentCode&&(t.imgName=a("6bcf")),"D_ALIPAY"==t.paymentCode&&(t.imgName=a("f2a8"))}),t.payList=e,t.payList.length&&t.$nextTick(function(){t.radio=t.payList[0].paymentCode})})}},created:function(){this.billCode=this.$route.query.billCode,this.actuallyPaid=this.$route.query.actuallyPaid,this.orderType=this.$route.query.orderType,this.successUrl=this.$route.query.successUrl,this.getPayList()}},u=c,p=(a("4b13"),a("2877")),d=Object(p["a"])(u,i,s,!1,null,"6adee6fc",null);e["default"]=d.exports},ec02:function(t,e,a){"use strict";a("c5f6"),a("96cf");var i=a("3b8d"),s=(a("a481"),a("4917"),a("751a"));function r(t,e,a,i,s,r){return o.apply(this,arguments)}function o(){return o=Object(i["a"])(regeneratorRuntime.mark(function t(e,a,i,r,o,n){var l,c;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(i=Number(i),0!==i){t.next=3;break}return t.abrupt("return",i);case 3:return l={usrId:e.Storage.get("USER_INFO").usrId,paymentCode:"D_WEIXIN",tradeTypeCode:"QRCODE",paymentTypeCode:n||"D_FULL",shopCode:e.Storage.get("USER_INFO").shopCode,orderList:a,orderType:o||null,openId:"",payAmount:Number(i),unionId:"",successUrl:r},t.next=6,s["a"].post("payment/orderPayment",l);case 6:if(c=t.sent,"200"!==c.code){t.next=11;break}return t.abrupt("return",c);case 11:return e.$alert(c.message,this.$t("common.hint"),{confirmButtonText:this.$t("common.sure"),callback:function(t){}}),t.abrupt("return",Promise.reject());case 13:case"end":return t.stop()}},t,this)})),o.apply(this,arguments)}function n(t,e,a,i,s,r){return l.apply(this,arguments)}function l(){return l=Object(i["a"])(regeneratorRuntime.mark(function t(e,a,i,r,o,n){var l,c;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(i=Number(i),0!==i){t.next=3;break}return t.abrupt("return",i);case 3:return l={usrId:e.Storage.get("USER_INFO").usrId,paymentCode:"D_ALIPAY",tradeTypeCode:"WEBPAY",paymentTypeCode:n||"D_FULL",shopCode:e.Storage.get("USER_INFO").shopCode,orderList:a,orderType:o||null,openId:"",payAmount:Number(i),unionId:"",successUrl:r},t.next=6,s["a"].post("payment/orderPayment",l);case 6:return c=t.sent,t.abrupt("return",c);case 8:case"end":return t.stop()}},t)})),l.apply(this,arguments)}e["a"]={wxPay:r,aliPay:n}},f2a8:function(t,e,a){t.exports=a.p+"img/zhifubao.d0966de1.png"},ff0f:function(t,e,a){"use strict";var i=a("6be9"),s=a.n(i);s.a}}]);