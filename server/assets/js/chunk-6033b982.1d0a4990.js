(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6033b982"],{1752:function(t,e,i){},"32eb":function(t,e,i){},3340:function(t,e,i){"use strict";var s=i("32eb"),a=i.n(s);a.a},"48e5":function(t,e,i){},"6ac58":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"thanksPage"},[i("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"697px"},on:{"update:visible":function(e){t.dialogVisible=e},close:function(e){return t.cancelOperation()}}},[i("el-form",{ref:"rulesAddress",attrs:{rules:t.rulesAddress,model:t.addressInfo,"label-width":"100px"}},[i("div",{staticClass:"flex-vcenter"},[i("el-form-item",{attrs:{label:t.$t("addressList.consignee"),prop:"name"}},[i("el-input",{attrs:{clearable:"",placeholder:t.$t("addressList.inputName")},model:{value:t.addressInfo.name,callback:function(e){t.$set(t.addressInfo,"name",e)},expression:"addressInfo.name"}})],1),i("el-form-item",{staticClass:"input-phone",attrs:{label:t.$t("addressList.phone"),prop:"phone"}},[i("el-input",{attrs:{clearable:"",placeholder:t.$t("addressList.inputPhone"),maxlength:"11"},model:{value:t.addressInfo.phone,callback:function(e){t.$set(t.addressInfo,"phone",e)},expression:"addressInfo.phone"}})],1)],1),i("el-form-item",{attrs:{label:t.$t("addressList.area"),prop:"addressModel"}},[i("el-cascader",{ref:"cascader",attrs:{options:t.areaList},on:{change:t.areaChange},model:{value:t.addressInfo.addressModel,callback:function(e){t.$set(t.addressInfo,"addressModel",e)},expression:"addressInfo.addressModel"}})],1),i("el-form-item",{attrs:{label:t.$t("addressList.detailAddress"),prop:"detail"}},[i("el-input",{attrs:{type:"textarea",clearable:"",placeholder:t.$t("addressList.inputdetailAddress"),minlength:"2",maxlength:"40"},model:{value:t.addressInfo.detail,callback:function(e){t.$set(t.addressInfo,"detail",e)},expression:"addressInfo.detail"}})],1),i("div",{staticClass:"flex-box",staticStyle:{"justify-content":"space-between"}},[i("el-form-item",{attrs:{label:" "}},[i("el-checkbox",{on:{change:t.changeDefault},model:{value:t.defaultStatus,callback:function(e){t.defaultStatus=e},expression:"defaultStatus"}},[t._v(t._s(t.$t("addressList.setDefault")))])],1),i("div",{staticClass:"flex-box operation"},[i("throttle",{attrs:{time:1e3,events:"click",isDebounce:!0}},[i("button",{staticClass:"sure",attrs:{type:"button"},on:{click:function(e){return t.addressOperation("rulesAddress")}}},[t._v(t._s(t.$t("addressList.sure")))])]),i("button",{staticClass:"cancel",attrs:{type:"button"},on:{click:function(e){return t.cancelOperation()}}},[t._v(t._s(t.$t("addressList.cancel")))])],1)],1)],1)],1)],1)},a=[],n=(i("7f7f"),i("96cf"),i("3b8d")),o=(i("28b2"),i("450d"),i("c7ad")),r=i.n(o),c=i("bf3c"),l=i("22ce"),d=i("393c"),u=(i("ac6a"),i("28a5"),i("c5f6"),function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,s=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,n=0;return function(){for(var o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];if(s)e&&clearTimeout(e),e=setTimeout(function(){t.apply(a,r)},i);else{var l=(new Date).getTime();if(l-n<i)return;n=l,t.apply(a,r)}}}),m={name:"Throttle",abstract:!0,props:{time:Number,events:String,isDebounce:{type:Boolean,default:!1}},created:function(){this.eventKeys=this.events.split(","),this.originMap={},this.throttledMap={}},render:function(){var t=this,e=this.$slots.default[0];return this.eventKeys.forEach(function(i){var s=e.data.on[i];s===t.originMap[i]&&t.throttledMap[i]?e.data.on[i]=t.throttledMap[i]:s&&(t.originMap[i]=s,t.throttledMap[i]=u(s,t.time,t.isDebounce,e),e.data.on[i]=t.throttledMap[i])}),e}},v={props:["id","destId","tag","addressList"],mixins:[d["a"]],components:{"el-cascader":r.a,throttle:m},data:function(){return{rulesAddress:{name:[{required:!0,validator:function(t,e,i){if(!e||""==e||e.length<2||e.length>15)return i(new Error("收货人姓名长度需2-15字符"));i()},trigger:"blur"}],phone:[{required:!0,validator:this.validatePhone,trigger:"blur"}],addressModel:[{required:!0,message:this.$t("addressList.choiceArea"),trigger:"blur"}],detail:[{required:!0,validator:this.validateAdrressDetail,trigger:"blur"}]},painDisabled:!0,areaList:[],storeTakeForm:{username:"",phone:"",addressModel:[]},dialogTitle:"",defaultStatus:!1,dialogVisible:!1,addressInfo:{name:"",phone:"",addressModel:[],addressId:"",detail:"",setDefault:""}}},methods:{cancelOperation:function(){var t=this;this.emptyVlaue(),this.dialogVisible=!1,this.$nextTick(function(){t.$refs.rulesAddress.resetFields()})},areaChange:function(t){t&&(this.addressInfo.addressId=t[2]),this.addressModel=[this.$refs.cascader.currentLabels[0],this.$refs.cascader.currentLabels[1],this.$refs.cascader.currentLabels[2]]},setDialogViewState:function(){this.dialogVisible=!this.dialogVisible,this.defaultStatus=!1},changeDefault:function(t){this.addressInfo.setDefault=t?1:0},emptyVlaue:function(){this.addressInfo={name:"",phone:"",addressModel:[],addressId:"",detail:"",setDefault:""}},addressOperation:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var i,s=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:i={id:null!=this.id?parseInt(this.id):this.id,address:this.addressInfo.detail,cargousrName:this.addressInfo.name,cargoMobile:this.addressInfo.phone,cargoPhone:this.addressInfo.phone,defaultFlag:0==this.addressList.length?1:this.addressInfo.setDefault,destCode:this.addressInfo.addressId},this.$refs[e].validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!e){t.next=3;break}return t.next=3,l["l"].changeAddrInfo(i).then(function(){s.$message({type:"info",message:null!=s.id?s.$t("addressList.changeAddressSuccess"):s.$t("addressList.addAddressSuccess")}),s.dialogVisible=!1,s.$emit("getAddressList"),s.emptyVlaue()},function(){});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),getAddressDetail:function(){var t=this,e={addressId:this.id,destId:this.destId};l["l"].getAddrDetail(e).then(function(e){t.addressInfo={name:e.cargousrName,phone:e.cargoPhone,addressId:e.districtCode,province:e.provinceCnName,district:e.districtCnName,city:e.cityCnName,detail:e.address,setDefault:e.defaultFlag,addressModel:[e.provinceCode,e.cityCode,e.districtCode]},1==t.addressInfo.setDefault?t.defaultStatus=!0:t.defaultStatus=!1})},titleChange:function(){null==this.id?this.dialogTitle="新增收货地址":(this.dialogTitle="修改收货地址",this.getAddressDetail())}},watch:{"addressInfo.name":function(t){var e=this;this.$nextTick(function(){e.addressInfo.name=window.filterInput(t)})},"addressInfo.detail":function(t){var e=this;this.$nextTick(function(){e.addressInfo.detail=window.filterInput(t)})},"addressInfo.phone":function(t){var e=this;this.$nextTick(function(){e.addressInfo.phone=window.filterPhone(t)})}},mounted:function(){this.areaList=window.c_disposeCityData(c["a"])}},h=v,p=(i("3340"),i("2877")),f=Object(p["a"])(h,s,a,!1,null,"9bc9eab6",null);e["a"]=f.exports},7113:function(t,e,i){"use strict";var s=i("1752"),a=i.n(s);a.a},7120:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container",on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"goods-detail-cust com-b-shadow"},[i("div",{staticClass:"triangle-up"}),i("p",{directives:[{name:"show",rawName:"v-show",value:t.mainFabricName,expression:"mainFabricName"}],staticClass:"cust-title main-fabric"},[t._v("\n            "+t._s(t.$t("cart.mainFabric"))+"："+t._s(t.mainFabricName)+"\n        ")]),i("ul",t._l(t.partList,function(e,s){return i("li",{staticClass:"flex-between part-item"},[i("div",{staticClass:"flex-auto"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.getImg(e.fabricPictFileUrl),expression:"getImg(item.fabricPictFileUrl)"}],staticClass:"part-pic fl",attrs:{alt:""}}),i("span",{staticClass:"part-name"},[t._v(t._s(e.regionName+" - "+e.partCode))])])])}),0),i("ul",t._l(t.embList.emb,function(e,s){return i("li",{staticClass:"font-item"},[i("p",{directives:[{name:"show",rawName:"v-show",value:t.embList.emb.length,expression:"embList.emb.length"}],staticClass:"cust-title"},[t._v("\n                    "+t._s(t.$t("common.emb"))+"：（"+t._s(e.regionName)+"）\n                ")]),i("div",{staticClass:"flex-between"},[i("div",{staticClass:"flex-auto"},[i("span",{staticClass:"font-label",attrs:{title:e.fontsName}},[t._v(t._s(e.fontsName)+"：")]),i("span",{staticClass:"font-cont",style:{color:e.colorNumberHx},attrs:{title:e.content}},[t._v(t._s(e.content))])]),e.embprice?i("div",{},[t._v("￥"+t._s(t._f("$goldDivide")(e.embprice)))]):t._e()])])}),0),i("ul",t._l(t.embList.embpt,function(e,s){return i("li",{staticClass:"font-item"},[i("p",{directives:[{name:"show",rawName:"v-show",value:t.embList.embpt.length,expression:"embList.embpt.length"}],staticClass:"cust-title"},[t._v("\n                    "+t._s(t.$t("common.ept"))+"：（"+t._s(e.regionName)+"）\n                ")]),i("div",{staticClass:"flex-between flex-vcenter img-cut-top"},[i("div",{staticClass:"flex-auto flex-box"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.getImg(e.embFileUrl),expression:"getImg(item.embFileUrl)"}],staticClass:"font-item-img",attrs:{alt:""}})]),e.embprice?i("div",{staticClass:"img-cont"},[t._v("￥"+t._s(t._f("$goldDivide")(e.embprice)))]):t._e()])])}),0),i("ul",t._l(t.embList.print,function(e,s){return i("li",{staticClass:"font-item"},[i("p",{directives:[{name:"show",rawName:"v-show",value:t.embList.print.length,expression:"embList.print.length"}],staticClass:"cust-title"},[t._v("\n                    "+t._s(t.$t("common.print"))+"：（"+t._s(e.regionName)+"）\n                ")]),i("div",{staticClass:"flex-between flex-vcenter img-cut-top"},[i("div",{staticClass:"flex-auto flex-box"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.getImg(e.embPrintPictUrl),expression:"getImg(item.embPrintPictUrl)"}],staticClass:"font-item-img",attrs:{alt:""}})]),e.prtprice?i("div",{staticClass:"img-cont"},[t._v("￥"+t._s(t._f("$goldDivide")(e.prtprice)))]):t._e()])])}),0)])])},a=[],n=(i("ac6a"),{components:{},data:function(){return{}},props:{partList:{type:Array,default:[]},mainFabricName:{type:String,default:""},fromPage:{type:String,default:""}},computed:{embList:function(){var t=this,e={emb:[],embpt:[],print:[]};return this.partList.forEach(function(i){"shoppingCart"===t.fromPage?(i.salePrice=i.price,i.rtlCartDttEmbDto&&(i.rtlCartDttEmbDto.regionName=i.regionName,i.rtlCartDttEmbDto.fontsName=i.rtlCartDttEmbDto.ictEmbFontsHdName,i.rtlCartDttEmbDto.content=i.rtlCartDttEmbDto.embValue,i.rtlCartDttEmbDto.embprice=i.rtlCartDttEmbDto.salePrice,e.emb.push(i.rtlCartDttEmbDto)),i.rtlCartDttEmbptDto&&(i.rtlCartDttEmbptDto.regionName=i.regionName,i.rtlCartDttEmbptDto.embFileUrl=i.rtlCartDttEmbptDto.fileUrl,i.rtlCartDttEmbptDto.embprice=i.rtlCartDttEmbptDto.salePrice,e.embpt.push(i.rtlCartDttEmbptDto)),i.rtlCartDttPrintDto&&(i.rtlCartDttPrintDto.regionName=i.regionName,i.rtlCartDttPrintDto.embPrintPictUrl=i.rtlCartDttPrintDto.fileUrl,i.rtlCartDttPrintDto.prtprice=i.rtlCartDttPrintDto.salePrice,e.print.push(i.rtlCartDttPrintDto))):"orderSettle"===t.fromPage?(i.emb.length&&(i.emb[0].regionName=i.regionName,e.emb.push(i.emb[0])),i.ept.length&&(i.ept[0].regionName=i.regionName,e.embpt.push(i.ept[0])),i.prt.length&&(i.prt[0].regionName=i.regionName,e.print.push(i.prt[0]))):(i.emb&&i.emb.length&&(i.emb[0].regionName=i.regionName,i.emb[0].fontsName=i.emb[0].ictEmbfontsHdName,i.emb[0].embprice=i.emb[0].price,e.emb.push(i.emb[0])),i.embPrint&&i.embPrint.length&&(i.embPrint[0].regionName=i.regionName,i.embPrint[0].embFileUrl=i.embPrint[0].embPrintPictUrl,e.embpt.push(i.embPrint[0])),i.prtPrint&&i.prtPrint.length&&(i.prtPrint[0].regionName=i.regionName,e.print.push(i.prtPrint[0])))}),e}},methods:{},created:function(){}}),o=n,r=(i("bad7"),i("2877")),c=Object(r["a"])(o,s,a,!1,null,"a2048970",null);e["a"]=c.exports},"88b7":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"invoice"},[t.fromPage?t._e():i("div",{staticClass:"check"},[i("div",{staticClass:"invoice-status-box"},[i("label",[t._v(t._s(t.$t("order.state"))+" : ")]),i("el-select",{attrs:{"popper-class":"select-box",placeholder:"请选择"},on:{change:t.statusChange},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.options,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),i("div",{staticClass:"invoice-list-content"},[t.userInvoiceList.length<=0&&!t.loading?i("p",{staticClass:"tip"},[t._v(t._s(t.$t("invoice.noData"))+"~")]):t._e(),i("ul",{staticClass:"invoice-list"},t._l(t.userInvoiceList,function(e){return i("li",{key:e.id,staticClass:"invoice-item"},[i("div",{staticClass:"item-head clearfix"},[t._v("\n                        "+t._s(t.$t("order.state"))+":\n                        "),i("span",[t._v(t._s(e.statusName))]),i("span",{directives:[{name:"show",rawName:"v-show",value:!!e.nnJpgUrl,expression:"!!item.nnJpgUrl"}],staticClass:"download-btn fr",on:{click:function(i){return t.downloadInvoice(e.nnJpgUrl)}}},[t._v("\n                            ↓ "+t._s(t.$t("invoice.download"))+"\n                        ")])]),i("div",{staticClass:"item-content"},[i("div",{staticClass:"fl half-width content-box"},[i("label",[t._v(t._s(t.$t("invoice.type"))+"：")]),i("span",[t._v(t._s(e.typeName))])]),i("div",{staticClass:"fl half-width content-box"},[i("label",[t._v(t._s(t.$t("invoice.time"))+"：")]),i("span",[t._v(t._s(e.invoiceDate))])]),i("div",{staticClass:"fl half-width content-box"},[i("label",[t._v(t._s(t.$t("invoice.lookUp"))+"：")]),i("span",[t._v(t._s(e.title))])]),i("div",{staticClass:"fl half-width content-box"},[i("label",[t._v(t._s(t.$t("invoice.orderNumber"))+"：")]),i("span",[t._v(t._s(e.billCode))])]),i("div",{directives:[{name:"show",rawName:"v-show",value:!!e.invoiceCode,expression:"!!item.invoiceCode"}],staticClass:"fl half-width content-box"},[i("label",[t._v(t._s(t.$t("invoice.identificationNumber"))+"：")]),i("span",[t._v(t._s(e.invoiceCode))])]),i("div",{staticClass:"fl wd100"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!!e.shippingName||!!e.isSendWithOrd&&"D_INV_TRICKT"==e.invStateCode&&"D_INVOICE_COMMON"===e.typeCode,expression:"!!item.shippingName ||!!item.isSendWithOrd && item.invStateCode == 'D_INV_TRICKT' && item.typeCode === 'D_INVOICE_COMMON' "}],staticClass:"fl half-width content-box"},[i("label",[t._v(t._s(t.$t("invoice.distributionLogistics"))+"：")]),e.isSendWithOrd&&1==e.isSendWithOrd?t._e():i("span",[t._v(t._s(e.shippingName))]),e.isSendWithOrd&&"D_INV_TRICKT"==e.invStateCode?i("span",[t._v(t._s(t.$t("invoice.send")))]):t._e()])]),"D_INVOICE_COMMON"!==e.typeCode||!e.shippingCode||e.isSendWithOrd&&1==e.isSendWithOrd?t._e():i("div",{staticClass:"show-logistics-btn",class:{active:!0===e.showLogistics},on:{click:function(i){return t.checkLogistics(e)}}},[t._v("\n                            "+t._s(t.$t("invoice.lookMore"))+"\n                            "),i("i",{staticClass:"fr iconfont icon-xiangxiajiantou"})]),"D_INVOICE_COMMON"===e.typeCode&&e.logisticsList.length>0?i("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.showLogistics,expression:"item.showLogistics === true"}],staticClass:"fl content-box clearfix"},[i("label",{staticClass:"fl"},[t._v(" "+t._s(t.$t("invoice.logisticsProcess"))+" ：")]),i("div",{staticClass:"fl logistics"},t._l(e.logisticsList,function(e,s){return i("p",{key:s},[t._v(t._s(e.acceptTime)+"\n                                    "+t._s(e.acceptStation)+"\n                                ")])}),0)]):t._e()])])}),0)]),t.total>0?i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.pageNum,"page-size":t.pageSize,total:t.total},on:{"current-change":t.onPageChagne}})],1):t._e()]),t.fromPage?i("div",{staticClass:"apply"},[i("div",{staticClass:"invoice-item"},[i("div",{staticClass:"item-head clearfix"},[t._v(t._s(t.$t("invoice.applyInvoice")))]),i("div",{staticClass:"item-content"},[i("div",{staticClass:"fl half-width content-box"},[i("label",[t._v(t._s(t.$t("invoice.type"))+"：")]),t._l(t.invoiceList,function(e){return i("div",{key:e.id,staticClass:"item-btn",class:{selected:e.dictCode===t.invoiceType}},[t._v("\n                        "+t._s(e.dictName)+"\n                        "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.invoiceType,expression:"invoiceType"}],staticClass:"radioInput",attrs:{type:"radio"},domProps:{value:e.dictCode,checked:t._q(t.invoiceType,e.dictCode)},on:{change:function(i){t.invoiceType=e.dictCode}}}),e.dictCode===t.invoiceType?i("div",{staticClass:"selected-btn"}):t._e()])})],2),i("div",{staticClass:"fl half-width content-box"},[i("label",[t._v(t._s(t.$t("invoice.lookUp"))+"：")]),t._l(t.invoiceTitleList,function(e){return i("div",{key:e.id,staticClass:"item-btn",class:{selected:e.dictCode===t.invoiceTitle}},[t._v("\n                        "+t._s(e.dictName)+"\n                        "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.invoiceTitle,expression:"invoiceTitle"}],staticClass:"radioInput",attrs:{type:"radio"},domProps:{value:e.dictCode,checked:t._q(t.invoiceTitle,e.dictCode)},on:{change:function(i){t.invoiceTitle=e.dictCode}}}),e.dictCode===t.invoiceTitle?i("div",{staticClass:"selected-btn"}):t._e()])})],2),"D_INVTITLETYPE2"===t.invoiceTitle?[i("div",{staticClass:"fl half-width content-box"},[i("label",[t._v(t._s(t.$t("invoice.companyName"))+"：")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.companyName,expression:"companyName"}],staticClass:"invoice-text",attrs:{type:"text"},domProps:{value:t.companyName},on:{input:[function(e){e.target.composing||(t.companyName=e.target.value)},function(e){return t.checkVal(0)}]}})]),i("div",{staticClass:"fl half-width content-box"},[i("label",[t._v(t._s(t.$t("invoice.identificationNumber"))+"：")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.taxpayerNum,expression:"taxpayerNum"}],staticClass:"invoice-text",attrs:{type:"text"},domProps:{value:t.taxpayerNum},on:{input:[function(e){e.target.composing||(t.taxpayerNum=e.target.value)},function(e){return t.checkVal(1)}]}})])]:t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:"D_INVOICE_COMMON"===t.invoiceType,expression:"invoiceType === 'D_INVOICE_COMMON'"}],staticClass:"address-info content-box fl"},[i("label",{staticClass:"fl"},[t._v(t._s(t.$t("invoice.address"))+"：")]),i("ul",{staticClass:"fl address-list"},[t._l(t.addressList,function(e,s){return t.addressList.length>0?i("li",{directives:[{name:"show",rawName:"v-show",value:s<=t.maxAddressLength,expression:"index <= maxAddressLength"}],key:s,staticClass:"address-item"},[i("div",{staticClass:"select-address"},[i("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":e.id===t.addrVal?"#icon-xuanzhongfangxing":"#icon-weixuanzhongfangxing"}})]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.addrVal,expression:"addrVal"}],attrs:{type:"radio"},domProps:{value:e.id,checked:t._q(t.addrVal,e.id)},on:{change:function(i){t.addrVal=e.id}}})]),i("span",{staticClass:"name"},[t._v(t._s(e.cargousrName)+t._s(t.$t("invoice.closed")))]),i("span",[t._v(t._s(e.cargoPhone))]),i("span",[1===e.defaultFlag?i("span",{staticClass:"color-red"},[t._v(t._s(t.$t("invoice.defalutAdress")))]):t._e(),t._v("\n                                "+t._s(e.destDesc+e.address)+"\n                            ")])]):t._e()}),i("div",{staticClass:"add-address-btn",on:{click:t.editAddr}},[t._v(t._s(t.$t("invoice.addAdress")))]),i("div",{directives:[{name:"show",rawName:"v-show",value:!!t.addressList.length&&t.addressList.length>5,expression:"!!addressList.length && addressList.length > 5"}],staticClass:"show-more-address",class:{active:!!t.canShowMoreAddress}},[i("i",{staticClass:"iconfont icon-xiangxiajiantou",on:{click:function(e){t.canShowMoreAddress=!t.canShowMoreAddress}}})]),i("edit-dialog",{ref:"addrEditCom",attrs:{Id:t.editDialog.id,destId:t.editDialog.destId,tag:t.editDialog.tag,addressList:t.addressList},on:{sureEvent:t.addressEdit,getAddressList:t.getAddrList}})],2)])],2),i("div",{staticClass:"btn-box"},[i("div",{staticClass:"invoice-btn confirm-btn",on:{click:t.submitInvoice}},[t._v(t._s(t.$t("invoice.submit")))]),i("div",{staticClass:"invoice-btn reset-btn",on:{click:t.goBack}},[t._v(t._s(t.$t("invoice.cancel")))])])])]):t._e()])},a=[],n=(i("a481"),i("ac6a"),i("22ce")),o=i("7120"),r=i("6ac58"),c={components:{CustomDialog:o["a"],EditDialog:r["a"]},data:function(){return{editDialog:{id:null,destId:null,tag:!1},showPage:null,options:[{value:"",label:this.$t("invoice.all")},{value:"D_INV_UNAUDIT",label:this.$t("invoice.unaudit")},{value:"D_INV_AGREE",label:this.$t("invoice.agreen")},{value:"D_INV_REFUSE",label:this.$t("invoice.refuse")},{value:"D_INV_TRICKT",label:this.$t("invoice.trickt")},{value:"D_INV_CHANCEL",label:this.$t("invoice.cancel")}],status:"",userInvoiceList:[],pageNum:1,pageSize:5,total:null,fromPage:"",storageData:{},invoiceList:[],invoiceTitleList:[],invoiceType:"",invoiceTitle:"",companyName:"",taxpayerNum:"",addressList:[],addrVal:"",btnLock:!1,loading:!1,canShowMoreAddress:!1}},methods:{loadPage:function(){this.fromPage=this.$route.query.fromPage,this.getInvoiceType(),this.getInvoiceTitleType(),this.getAddrList(),this.getInvoiceList()},getInvoiceList:function(){var t=this;this.loading=!0,c_showLoading();var e={pageNum:this.pageNum,pageSize:this.pageSize};this.status&&(e.invoiceStatusCode=this.status),n["e"].getList(e).then(function(e){t.userInvoiceList=e.list,t.total=e.total,t.loading=!1}).then(function(){c_showLoading(!1),t.loading=!1})},getInvoiceType:function(){var t=this,e={type:"D_INVOICETYPE"};n["e"].getInvoiceType(e).then(function(e){t.invoiceList=e})},getInvoiceTitleType:function(){var t=this,e={type:"D_INVTITLETYPE"};n["e"].getInvoiceType(e).then(function(e){t.invoiceTitleList=e})},getAddrList:function(){var t=this;this.addrVal="";var e={vipUsrId:Storage.get("USER_INFO").usrId,pageNum:1};n["l"].getAddrList(e).then(function(e){t.addressList=e.list})},editAddr:function(){this.addressList.length&&this.addressList.length>=20?this.$toast(this.$t("invoice.sorry")):this.$refs.addrEditCom.setDialogViewState()},addressEdit:function(){this.$refs.addrEditCom.setDialogViewState(!1),this.getAddrList()},goBack:function(){this.$router.go(-1)},submitInvoice:function(){var t=this;if(!this.btnLock){if(this.btnLock=!0,!this.invoiceType||!this.invoiceTitle)return this.$toast(this.$t("invoice.perfect")),void(this.btnLock=!1);var e={ctmUsrId:Storage.get("USER_INFO").usrId,cookieId:Storage.get("USER_INFO").usrId,invoiceTypeCode:this.invoiceType,invoiceTitle:this.invoiceTitle};if("D_INVOICE_ELC"===this.invoiceType){if("D_INVTITLETYPE1"===this.invoiceTitle);else if("D_INVTITLETYPE2"===this.invoiceTitle){if(!this.companyName||!this.taxpayerNum)return this.$toast(this.$t("invoice.perfect")),void(this.btnLock=!1);e.invoiceCompany=this.companyName,e.invoiceTaxAlias=this.taxpayerNum}}else if("D_INVOICE_COMMON"===this.invoiceType)if("D_INVTITLETYPE1"===this.invoiceTitle){if(""===this.addrVal)return this.$toast(this.$t("invoice.perfect")),void(this.btnLock=!1);this.addressList.forEach(function(i){i.id===t.addrVal&&(e.invoiceAddrId=i.id)})}else if("D_INVTITLETYPE2"===this.invoiceTitle){if(!(this.companyName&&this.taxpayerNum&&this.addrVal))return this.$toast(this.$t("invoice.perfect")),void(this.btnLock=!1);this.addressList.forEach(function(i){i.id===t.addrVal&&(e.invoiceAddrId=i.id)}),e.invoiceCompany=this.companyName,e.invoiceTaxAlias=this.taxpayerNum}if(console.log("putData",e),e.invoiceTaxAlias&&e.invoiceTaxAlias<6)return this.$toast(this.$t("invoice.identificationNumberErrorTip")),void(this.btnLock=!1);if("settlement"===this.fromPage){var i={};this.invoiceList.forEach(function(e){e.dictCode===t.invoiceType&&(i.type=e.dictName)}),this.invoiceTitleList.forEach(function(e){e.dictCode===t.invoiceTitle&&(i.title=e.dictName)}),i.data=e,console.log(i),Storage.set("invoiceData",i),this.btnLock=!1,window.history.go(-1)}else{var s=this.$route.query.billCode,a=Object.assign(e,{billCode:s});n["e"].putInvoice(a).then(function(){t.$toast(t.$t("invoice.submitSuccess")),setTimeout(function(){t.btnLock=!1,t.$router.go(-1)},1e3)},function(e){var i=e.errorMsg||t.$t("invoice.fauirle");t.$alert(i),t.btnLock=!1}).then(function(){t.btnLock=!1})}}},statusChange:function(){this.pageNum=1,this.getInvoiceList()},checkLogistics:function(t){var e=this;if(!0!==t.showLogistics)if(t.logisticsList&&t.logisticsList.length.length>0)t.showLogistics=!0;else{var i={expressCode:t.shippingCode,logisticCode:t.sendShipCode};n["k"].getLogis(i).then(function(e){t.logisticsList=e.traceList,t.showLogistics=!0},function(){e.$toast(e.$t("invoice.noLogistics"))})}else t.showLogistics=!1},onPageChagne:function(t){this.pageNum=t,this.getInvoiceList()},checkVal:function(t){switch(console.log(t),t){case 0:this.companyName=this.companyName.replace(/(^\s+)|(\s+$)/g,"");break;case 1:this.taxpayerNum=this.taxpayerNum.replace(/[\W]/g,""),this.taxpayerNum.length>20&&(this.taxpayerNum=this.taxpayerNum.slice(0,20))}},downloadInvoice:function(t){window.open(t)}},created:function(){this.loadPage()},computed:{maxAddressLength:function(){return this.canShowMoreAddress?20:4}}},l=c,d=(i("7113"),i("2877")),u=Object(d["a"])(l,s,a,!1,null,"3ff13724",null);e["default"]=u.exports},bad7:function(t,e,i){"use strict";var s=i("48e5"),a=i.n(s);a.a}}]);