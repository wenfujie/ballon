(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c6822e4"],{4209:function(o,e,s){"use strict";var t=s("8789"),d=s.n(t);d.a},"6e16":function(o,e,s){"use strict";s.r(e);var t=function(){var o=this,e=o.$createElement,s=o._self._c||e;return s("div",[s("div",{staticClass:"wrapper"},[s("iframe",{staticClass:"design-content com-b-shadow",attrs:{src:o.url,id:"iframePage"}})]),o.loginDialogFlag?s("login-dialog",{attrs:{defaultVisible:!0},on:{generalLoginSuccess:o.generalLoginSuccess,close:o.closeCallback}}):o._e()],1)},d=[],n=(s("a481"),s("5d2d")),a=s("22ce"),i=s("5539"),g={components:{LoginDialog:i["a"]},data:function(){return{isShelves:!1,goodsCode:"",url:"",loginDialogFlag:!1,postMessageStatus:null}},methods:{closeCallback:function(){this.loginDialogFlag=!1},generalLoginSuccess:function(){this.postMessage(this.postMessageStatus),this.loginDialogFlag=!1},postMessage:function(o){var e=document.getElementById("iframePage");e.contentWindow.postMessage({operate:o},this.url)}},created:function(){var o=this;this.rtlDesignHdId=this.$route.query.rtlDesignHdId,this.spGoodsDtDesignId=this.$route.query.spGoodsDtDesignId,this.$nextTick(function(){n["a"].get("COMPANYID").company_id,n["a"].get("USER_INFO")?JSON.stringify(n["a"].get("USER_INFO")):n["a"].get("USER_INFO");window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""));var e="".concat(window.location.origin,"/ballon-custom/#/"),s=o.$route.query.goodsCode||"",t=function(s){var t={ownCompanyId:n["a"].get("COMPANYID").company_id,goodsCode:o.goodsCode||o.$route.query.goodsCode,buscontsCode:baseConstant.busContsCode?baseConstant.busContsCode:n["a"].get("properties").busContsCode};a["d"].isShelves(t).then(function(t){1===t.sellFlag?(t.goodsName&&(document.title=t.goodsName),o.url=e+"goods/web-design?&goodsCode="+s+"&goodsId="+o.$route.query.goodsId+"&goodsName="+encodeURIComponent(t.goodsName),window.addEventListener("message",function(e){e.data.isLogin?o.loginDialogFlag=!0:e.data.operate&&"addCartSucceed"===e.data.operate&&(console.log("需要刷新购物车数量"),o.$store.dispatch("user/updateShoppingCart")),o.postMessageStatus=e.data.operate,console.log("收到"+e.origin+"消息",e.data)},!1),o.rtlDesignHdId&&(o.url+="&rtlDesignHdId="+o.rtlDesignHdId),o.spGoodsDtDesignId&&(o.url+="&spGoodsDtDesignId="+o.spGoodsDtDesignId)):(t.buscontsId&&0===t.sellFlag&&(t.goodsName&&(document.title=t.goodsName),o.url=e+"goods/web-design?&goodsCode="+s+"&goodsId="+o.$route.query.goodsId+"&goodsName="+encodeURIComponent(t.goodsName),window.addEventListener("message",function(e){e.data.isLogin?o.loginDialogFlag=!0:e.data.operate&&"addCartSucceed"===e.data.operate&&(console.log("需要刷新购物车数量"),o.$store.dispatch("user/updateShoppingCart")),o.postMessageStatus=e.data.operate,console.log("收到"+e.origin+"消息",e.data)},!1),o.rtlDesignHdId&&(o.url+="&rtlDesignHdId="+o.rtlDesignHdId),o.spGoodsDtDesignId&&(o.url+="&spGoodsDtDesignId="+o.spGoodsDtDesignId)),t.buscontsId||0!==t.sellFlag||(t.goodsName&&(document.title=t.goodsName),o.url=e+"goods/web-design?&goodsCode="+s+"&goodsId="+o.$route.query.goodsId+"&goodsName="+encodeURIComponent(t.goodsName),window.addEventListener("message",function(e){e.data.isLogin?o.loginDialogFlag=!0:e.data.operate&&"addCartSucceed"===e.data.operate&&(console.log("需要刷新购物车数量"),o.$store.dispatch("user/updateShoppingCart")),o.postMessageStatus=e.data.operate,console.log("收到"+e.origin+"消息",e.data)},!1),o.rtlDesignHdId&&(o.url+="&rtlDesignHdId="+o.rtlDesignHdId),o.spGoodsDtDesignId&&(o.url+="&spGoodsDtDesignId="+o.spGoodsDtDesignId)),t&&(t.buscontsId||0===t.sellFlag)||o.$router.push("/off-shelves"))})};t(s),document.getElementById("iframePage").contentWindow.location.replace("")})}},l=g,r=(s("4209"),s("2877")),c=Object(r["a"])(l,t,d,!1,null,"5f32dc80",null);e["default"]=c.exports},8789:function(o,e,s){}}]);