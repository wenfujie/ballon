(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b3a6741"],{"04d8":function(t,e,n){"use strict";n("ac4d"),n("8a81"),n("ac6a");var s=n("09cb"),a=n("bf3c"),o=window.c_disposeCityData(a["a"]);function i(t,e){return t.map(function(t){var n=!0,s=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;if(c.label==t)return e=c.children,c.value}}catch(r){s=!0,a=r}finally{try{n||null==i.return||i.return()}finally{if(s)throw a}}return null})}function c(){Object(s["a"])("kyQyvOBQwLUVrHieFzUcfV1TZt0slzlG").then(function(t){var e=new t.Geocoder,n=new t.Geolocation,s=[],a=[];n.getCurrentPosition(function(t){if(this.getStatus()==BMAP_STATUS_SUCCESS){var n=t.point;e.getLocation(n,function(t){var e=t.addressComponents;s=[e.province,e.city,e.district],a=i(s,o),Storage.set("POSITION",{location:a,locationTxt:s})})}else alert("failed"+this.getStatus())},{enableHighAccuracy:!0})})}e["a"]=c},"2a50":function(t,e,n){},"60c8":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"index min-height"},[n("div",{staticClass:"right-div"},[n("div",{staticClass:"flex-between"},[n("div",{staticClass:"search-people flex-start flex-box"},[n("el-input",{attrs:{clearable:"",placeholder:t.$t("amountBody.inputDress")},on:{clear:t.getAmountBodyList},model:{value:t.peopleDress,callback:function(e){t.peopleDress=e},expression:"peopleDress"}}),n("div",{staticClass:"search-button",style:{background:1==t.isSearch?"#B59F7F":"#cccccc"},on:{click:function(e){return t.getAmountBodyList()}}},[t._v(t._s(t.$t("common.search")))])],1)]),t.pagination.count>0?n("div",{staticClass:"right-content"},[n("table",{staticClass:"com-table"},[n("thead",{staticClass:"com-thead"},[n("th",[n("el-checkbox",{on:{change:t.selectAllEvent},model:{value:t.selectedAll,callback:function(e){t.selectedAll=e},expression:"selectedAll"}},[t._v(t._s(t.$t("common.checkAll")))])],1),n("th",[t._v(t._s(t.$t("amountBody.gender")))]),n("th",[t._v(t._s(t.$t("amountBody.specificTime")))]),n("th",[t._v(t._s(t.$t("amountBody.specificData")))])]),n("tbody",t._l(t.bodyList,function(e,s){return n("tr",{key:s,staticClass:"tr"},[n("td",{staticClass:"pain-td"},[n("el-checkbox",{model:{value:e.selected,callback:function(n){t.$set(e,"selected",n)},expression:"item.selected"}}),n("span",{staticClass:"name"},[t._v(t._s(e.dressedusrName))])],1),n("td",{staticClass:"pain-td"},[t._v(t._s(e.sexName))]),n("td",{staticClass:"pain-td"},[t._v(t._s(e.measureLog.slice(0,19)))]),null!=e.ctmmeasureDtMsrtypeDtos?n("td",{staticClass:"pain-td pain-search flex-box flex-center",on:{click:function(e){return t.showSkuDialog(s)}}},[t._v("\n              "+t._s(t.$t("amountBody.viewData"))+"\n              "),n("p",{class:t.skuIndex==s?"an-up":"an-down"},[t._v(t._s(t.skuIndex==s?"﹀":"︿"))]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.skuIndex==s,expression:"skuIndex == index"}],staticClass:"com-b-shadow sku-form"},[n("div",{staticClass:"triangle-up"}),n("div",{staticClass:"sku-form-item flex-box"},t._l(e.ctmmeasureDtMsrtypeDtos,function(e,s){return n("div",{key:s,staticClass:"dataTable flex-wrap"},t._l(e.measureInfoList,function(e,s){return n("div",{key:s,staticClass:"dataRow flex-box"},[n("div",{staticClass:"halfRow"},[t._v(t._s(e.gctMeasureHdName))]),n("div",{staticClass:"halfRow"},[t._v(t._s(e.cleanValue))])])}),0)}),0)])]):n("td",{staticClass:"pain-td pain-search flex-box flex-center"},[t._v(t._s(t.$t("amountBody.noDressData")))])])}),0)]),n("div",{staticClass:"body-footer"},[n("span",{staticClass:"footer-person"},[t._v(t._s(t.$t("amountBody.overSelected"))+" （"+t._s(t.count)+" "+t._s(t.$t("amountBody.pepole"))+"）")]),n("span",{staticClass:"footer-delete",on:{click:function(e){return t.deleteBodyData()}}},[t._v(t._s(t.$t("amountBody.batchDelete")))])])]):n("div",{staticClass:"no-data"},[t._m(0),n("div",{staticClass:"img-row-two"},[t._v(t._s(""==t.peopleDress?t.$t("amountBody.noData"):t.$t("amountBody.noDress")))])]),t.pagination.count>5?n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{"page-size":t.pagination.limit,"current-page":1,background:"",layout:"prev, pager, next",total:t.pagination.count},on:{"current-change":t.handleCurrentChange}})],1):t._e()]),n("Booking",{ref:"addBooking",attrs:{entrance:2},on:{getAmountBodyList:t.getAmountBodyList}})],1)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"img-row-one"},[s("img",{attrs:{src:n("9ab1")}})])}],o=n("cebc"),i=(n("ac6a"),n("96cf"),n("3b8d")),c=n("22ce"),r=n("010e"),u=n("04d8"),l={components:{Booking:r["a"]},data:function(){return{skuIndex:-1,isSearch:!1,vals:[],location:[],locationTxt:[],val:[],showDetail:!1,bodyList:[],peopleDress:"",areaList:[],countSelected:!1,anIndex:-1,selectedAll:!1,userId:Storage.get("USER_INFO").usrId,companyId:Storage.get("COMPANYID").company_id,ownCompanyId:Storage.get("COMPANYID").company_id,pagination:{count:0,limit:5,page:1,currentPage:1}}},metaInfo:function(){return{meta:[{name:"keyWords",content:"巴龙商城首页"}]}},methods:{deleteBodyDetail:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var n,s=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:n={userId:this.userId,companyId:this.companyId,ids:e.ctmmeasureDtMsrtypeDtos[0].id,ownCompanyId:this.ownCompanyId},this.$confirm(this.$t("amountBody.deleteBody"),"提示",{confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel"),type:"warning"}).then(function(){c["m"].delCtmMeasure(n).then(function(t){1==t?(s.$message({type:"success",message:s.$t("amountBody.succesDel")}),s.getAmountBodyList()):s.$message({type:"info",message:s.$t("amountBody.failureDel")})})}).catch(function(){s.$message({type:"info",message:s.$t("amountBody.cancelBodyData")})});case 2:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),deleteBodyData:function(){var t=this,e=[];if(this.bodyList.forEach(function(t){t.selected&&e.push(t.id)}),0==e.length)return this.$message({type:"info",message:this.$t("amountBody.pleaseSelect")});var n={userId:this.userId,companyId:this.companyId,ids:e.join(","),ownCompanyId:this.ownCompanyId};this.$confirm(this.$t("amountBody.sureMoreDel"),"提示",{confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel"),type:"warning"}).then(function(){c["m"].delCtmMeasureHd(n).then(function(e){0==e?(console.log("失败"),t.$message({type:"info",message:t.$t("amountBody.failureMoreDel")})):(console.log("成功"),t.$message({type:"success",message:t.$t("amountBody.sucessMoreDel")}),t.getAmountBodyList())})}).catch(function(){t.$message({type:"info",message:t.$t("amountBody.cancelMoreDel")})})},handleCurrentChange:function(t){this.pagination.page=t,this.getAmountBodyList()},bookingShow:function(){this.$refs.addBooking.bookingShow()},showSkuDialog:function(t){this.skuIndex!==t?this.skuIndex=t:this.skuIndex=-1},toViewBodyData:function(t){this.anIndex=t,this.showDetail=!this.showDetail},selectAllEvent:function(t){this.bodyList=this.bodyList.map(function(e){return Object(o["a"])({},e,{selected:t})})},getUserInfor:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["l"].getUserInfo({});case 2:e=t.sent,Storage.set("CARDNO",{cardNo:e.cardNo});case 4:case"end":return t.stop()}},t)}));function e(){return t.apply(this,arguments)}return e}(),getAmountBodyList:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,n,s,a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.skuIndex="-1",e={ctmUsrId:Storage.get("USER_INFO").usrId,companyId:Storage.get("COMPANYID").company_id,dressedUsrName:this.peopleDress,pageNum:this.pagination.page,pageSize:this.pagination.limit},t.next=4,c["m"].getCtmmeasure(e);case 4:if(n=t.sent,s=n.total,a=n.list,i=n.pages,this.pagination.count=s,null!=a){t.next=9;break}return t.abrupt("return");case 9:console.log(s,"total"),i>0&&0==a.length&&(this.pagination.page=this.pagination.page-1,this.getAmountBodyList()),this.bodyList=a.map(function(t){return Object(o["a"])({},t,{selected:!1})});case 12:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.getUserInfor(),this.getAmountBodyList()},mounted:function(){var t=this;window.addEventListener("keyup",function(e){13===e.keyCode&&t.getAmountBodyList()})},beforeRouteEnter:function(t,e,n){Object(u["a"])(),n()},watch:{peopleDress:function(t){var e=this;if(this.$nextTick(function(){e.peopleDress=window.filterInput(t)}),this.peopleDress.length>0)return this.isSearch=!0;this.getAmountBodyList(),this.isSearch=!1}},computed:{count:function(){if(null!=this.bodyList){var t=this.bodyList.filter(function(t){return!0===t.selected}).length;return this.selectedAll=t===this.bodyList.length,t}}}},d=l,m=(n("9461"),n("2877")),p=Object(m["a"])(d,s,a,!1,null,"dd7eec30",null);e["default"]=p.exports},9461:function(t,e,n){"use strict";var s=n("2a50"),a=n.n(s);a.a}}]);